#!/bin/zsh

mkdir gdb-build
mkdir gdb-install
cd gdb-build
../gdb-${V_GDB}/configure \
    --program-prefix=aarch64-tx1-linux-gnu- \
    --target=aarch64-linux-gnu \
    --prefix=/usr/local/tx1-toolchain \
    --with-pkgversion='GDB for Jetson TX1 18.04' \
    --disable-nls \
    --with-libexpat \
    --with-system-gdbinit=/usr/local/tx1-toolchain/sys-root/usr/share/gdb/gdbinit \
    --with-sysroot=/usr/local/tx1-toolchain/sys-root/ \
    --enable-lto \
    || exit $?
make || exit $?
DESTDIR=$PWD/../gdb-install make install|| exit $?
cd ../gdb-install
mkdir -p usr/local/tx1-toolchain/sys-root/usr/share/gdb

